/*
========================================================================================
    Base configuration for all profiles ========================================================================================
*/

process {
    // Error handling
    errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'finish' }
    maxRetries    = 3
    maxErrors     = '-1'
    
    // Resource labels (can be overridden by profile-specific configs)
    withLabel: 'process_single' {
        cpus   = 1
        memory = 4.GB
        time   = 4.h
    }
    
    withLabel: 'process_low' {
        cpus   = 4
        memory = 8.GB
        time   = 6.h
    }
    
    withLabel: 'process_medium' {
        cpus   = 10
        memory = 16.GB
        time   = 12.h
    }
    
    withLabel: 'process_high' {
        cpus   = 20
        memory = 32.GB
        time   = 24.h
    }
    
    withLabel: 'process_very_high' {
        cpus   = 40
        memory = 64.GB
        time   = 48.h
    }
}

// Executor configuration (will be overridden by profile-specific configs)
executor {
    queueSize = 50
}

// Enable conda/container usage
conda.enabled = false
docker.enabled = false
singularity.enabled = false

// Trace and report options
trace {
    enabled = true
    fields = 'task_id,hash,native_id,process,tag,name,status,exit,module,container,cpus,time,disk,memory,attempt,submit,start,complete,duration,realtime,queue,%cpu,%mem,rss,vmem,peak_rss,peak_vmem,rchar,wchar,syscr,syscw,read_bytes,write_bytes'
}

